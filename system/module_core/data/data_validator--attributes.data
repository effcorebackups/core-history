data_validators
- attributes|data_validator
    id: attributes
    scenario
    - check_if_settings_or_its_part|step_validate
        check: current
        where: dpath
        match: %^settings(/.*|)$%
        on_success
      # check "settings"
        - check_settings|step_validate
            check: current
            where: dpath
            match: %^settings$%
            on_success
            - check_type|step_validate
                check: current
                where: type
                match: %^array$%
                on_failure
                - error_register|step_validate_error_register
                    message|text
                      text: Item "%%_dpath_value" must be of type "%%_type"!
                      args
                      - type: array
      # check "settings/*"
        - check_settings_*|step_validate
            check: current
            where: dpath
            match: %^settings/.+$%
            on_success
            - check_type|step_validate
                check: current
                where: type
                match: %^(string|integer|double|boolean|null|array|object)$%
                on_success
              # check "settings/item:array"
                - check_if_array|step_validate
                    check: current
                    where: type
                    match: %^array$%
              # check "settings/item:object"
                - check_if_object|step_validate
                    check: current
                    where: type
                    match: %^object$%
                on_failure
                - error_register|step_validate_error_register
                    message|text
                      text: Item "%%_dpath_value" must be one of the following types: %%_types!
                      args
                      - types: string, integer, double, boolean, null, array, object
      # when not "settings" or "settings/*"
        on_failure
        - error_register|step_validate_error_register
            message|text_multiline
              text
              - 0: Item "%%_dpath_value" is positioned outside the allowed boundaries!
              - 1: Each item must be contained in the "%%_root" array.
              args
              - root: settings